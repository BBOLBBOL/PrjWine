<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Admin">  

<select id="AdminUserList" resultType="com.green.user.vo.UserVo">

SELECT *
FROM TUSER
ORDER BY U_NO ASC

</select>

<select id="AdminStoreList" resultType="com.green.store.vo.StoreVo">

SELECT * 
FROM STORE
WHERE S_NO &lt;&gt; 99
ORDER BY S_NO ASC

</select>

<select id="AdminTastingList" resultType="com.green.tasting.vo.TastingVo">

	 SELECT T.*, S.S_NAME, S.S_ADDRESS, S_DETAILADDRESS
     FROM  TESTING T
     LEFT JOIN STORE S     ON T.S_NO = S.S_NO
     ORDER BY T.T_IDX ASC

</select>

<delete id="AdminTastingListDelete">

DELETE FROM TESTING
WHERE  T_IDX  =  #{t_idx}

</delete>

<delete id="AdminStoreListDelete">

DELETE FROM STORE
WHERE S_NO  =  #{s_no}

</delete>

<select id="AdminBoardList" resultType="com.green.board.vo.BoardVo">

     SELECT B.*, S.S_NAME, S.S_ADDRESS, S_DETAILADDRESS
     FROM  BOARD B
     LEFT JOIN STORE S  ON B.S_NO = S.S_NO
     ORDER BY B.B_IDX ASC

</select>

<delete id="AdminBoardListDelete">

DELETE FROM BOARD
WHERE B_IDX = #{b_idx}

</delete>

<delete id="AdminUserListDelete">

DELETE FROM TUSER
WHERE U_NO  =  #{u_no}

</delete>

<insert id="AdminWineInsert">

INSERT INTO WINE (W_NO, W_WINEERY, W_NAME, W_VINTAGE, W_AVG, W_REVIEWS, W_LOCATION, W_IMAGE, W_KIND)
VALUES (SELECT NVL(MAX(W_NO),0)+1 FROM WINE)

</insert>

 
</mapper>
