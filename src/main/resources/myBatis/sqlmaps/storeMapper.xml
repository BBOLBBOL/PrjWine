<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Store">  

  
  <select id="Storelogin"
      resultType="com.green.store.vo.StoreVo">
		SELECT *
		 FROM  STORE
		WHERE S_ID = #{ s_id }
		 AND  S_PW = #{ s_pw }
   </select>

	<insert id="StoreInsert">

		INSERT INTO STORE (
			S_NO,
			S_ID,
			S_PW,
			S_NAME,
			S_SN,
			S_SI,
			S_GU,
			S_PHONE,
			S_CONT
		) VALUES (
		( SELECT NVL(MAX(S_NO),0)+1 FROM STORE),
		#{ s_id },
		#{ s_pw },
		#{ s_name },
		#{ s_sn },
		#{ s_si },
		#{ s_gu },
		#{ s_phone },
		#{ s_cont }
		)

	</insert>
<!--
   <delete id="UserDelete">
   
      DELETE  FROM   TUSER
        WHERE  USERID = #{ userid }  
           
   </delete>
 -->
 
	
	<!-- <select id="WineList" resultType="com.green.store.vo.HavingWineVo">
	
		SELECT  W.W_NAME,
				W.W_LOCATION,
				W.W_KIND,
				W.W_VINTAGE,
		        WL.W_AMOUNT,
		        WL.W_PRICE,
		        S.S_NAME
		FROM    WINELIST WL, WINE W, STORE S
		WHERE   WL.S_NO  = S.S_NO AND W.W_NO = WL.W_NO
	
	</select> -->
	
	<select id="WineList" resultType="com.green.store.vo.HavingWineVo">
	
		SELECT W.W_NAME,
       W.W_LOCATION,
       W.W_KIND,
       W.W_VINTAGE,
       WL.W_AMOUNT,
       WL.W_PRICE,
       S.S_NAME,
       WL.WL_IDX,
       S.S_NO,
       W.W_NO
	   FROM WINELIST WL
       INNER JOIN WINE W ON WL.W_NO = W.W_NO
       INNER JOIN STORE S ON S.S_NO = WL.S_NO
       WHERE S.S_NO = #{s_no}
	
	</select> 
				
	
	<update id="UpdateWine">
	
	UPDATE WINELIST
	SET    W_AMOUNT  =  #{w_amount},
	       W_PRICE   =  #{w_price}
	WHERE  WL_IDX      =  #{wl_idx}
	
	
	</update>
	
	
</mapper>





   