CREATE TABLE TUSER
(
   U_NO     NUMBER(6)    PRIMARY KEY,
   U_ID     VARCHAR2(20) UNIQUE,
   U_PW     VARCHAR2(20) NOT NULL,
   U_NAME   VARCHAR2(25) NOT NULL,
   U_SI     VARCHAR2(25) NOT NULL,
   U_GU     VARCHAR2(25) NOT NULL,
   U_PHONE  VARCHAR2(15) NOT NULL,
   U_BIRTH  NUMBER(4)    NOT NULL
);

CREATE TABLE STORE
(
    S_NO    NUMBER(6) PRIMARY KEY,
    S_ID    VARCHAR2(20) UNIQUE,
    S_PW    VARCHAR2(20) NOT NULL,
    S_NAME  VARCHAR2(25) NOT NULL,
    S_SN    VARCHAR2(25) NOT NULL,
    S_SI    VARCHAR2(25) NOT NULL,
    S_GU    VARCHAR2(25) NOT NULL,
    S_PHONE VARCHAR2(25) NOT NULL,
    S_CONT  VARCHAR2(150),
    S_IMG   VARCHAR2(25) 
);

CREATE TABLE WINE
(
    W_NO    NUMBER(6) PRIMARY KEY,
    W_NAME  VARCHAR2(20) UNIQUE,
    W_KIND  VARCHAR2(25) NOT NULL,
    W_NATION VARCHAR2(25) NOT NULL
);

CREATE TABLE WINELIST
(
    W_NO     NUMBER(6)      NOT NULL,
    S_NO     NUMBER(6)      NOT NULL,
    W_AMOUNT NUMBER(6)      DEFAULT 0,
    W_PRICE  NUMBER(10)     DEFAULT 0,
    W_IMG    VARCHAR2(25),
    W_CONT   VARCHAR2(150)  DEFAULT 'X',
    W_FOOD   VARCHAR2(25)   DEFAULT 'X',
    CONSTRAINT FK_W_NO FOREIGN KEY (W_NO) 
    REFERENCES WINE(W_NO),
    CONSTRAINT FK_S_NO FOREIGN KEY (S_NO) 
    REFERENCES STORE(S_NO)       
);

CREATE TABLE COUPON
(   
    C_IDX       NUMBER(6)    PRIMARY KEY,
    C_NAME      VARCHAR2(20) UNIQUE,
    U_NO        NUMBER(6) NOT NULL,
    S_NO        NUMBER(6) NOT NULL,
    C_AMOUNT    NUMBER(6)    DEFAULT 0,
    CONSTRAINT FK_S_NO2 FOREIGN KEY (S_NO) 
    REFERENCES STORE(S_NO),
    CONSTRAINT FK_U_NO FOREIGN KEY (U_NO) 
    REFERENCES TUSER(U_NO)
);

CREATE TABLE TESTING
(
    T_IDX   NUMBER(6)       PRIMARY KEY,
    T_NAME  VARCHAR2(20)    UNIQUE,
    T_CONT  VARCHAR2(150)   DEFAULT 'X',
    T_DATE  DATE            DEFAULT SYSDATE,
    T_COST  NUMBER(6)       DEFAULT 0,
    S_NO    NUMBER(6)       NOT NULL,
    CONSTRAINT FK_S_NO3 FOREIGN KEY (S_NO) 
    REFERENCES STORE(S_NO)    
);

DROP TABLE TUSER;
DROP TABLE STORE;
DROP TABLE WINE;
DROP TABLE WINELIST;
DROP TABLE COUPON;
DROP TABLE TESTING;